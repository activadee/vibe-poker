### Epic: Developer Experience (DX) | **Goal**: Bootstrap Nx Monorepo (Angular + NestJS) with **Bun** and start both apps | **Refs**: FR-000, NFR-010, NFR-009

- **Story**: As a maintainer I can set up the repo from scratch using **Bun** so that `bun run dev` starts **web (Angular)** and **api (NestJS)** locally with a shared-types lib and a working HTTP proxy. | **Refs**: FR-000 | **Estimate**: 8

  - **AC**:
    - A new Nx workspace exists with: `apps/web` (Angular), `apps/api` (NestJS), `libs/shared-types` (TS types).
    - `bun install` completes without errors.
    - `bun run dev` starts both dev servers: Angular at **<http://localhost:4200>**, Nest at **<http://localhost:3000>**.
    - Backend uses global prefix `/api`; `GET http://localhost:4200/api/healthz` proxies to the backend and returns `{"ok":true}`.
    - Repo includes basic CI workflow using **setup-bun**; pushing to `main` runs lint/test/build.
    - All steps are doable on macOS/Linux/Windows (WSL/Git Bash) with Bun installed.

  - **Tasks**:
    1. **Prereqs**
       - [SYS] Install **Bun**: `curl -fsSL https://bun.sh/install | bash` — 1
       - [SYS] Ensure **git** is available: `git --version` — 0.5
    2. **Create Workspace**
       - [DX] Create Nx workspace (apps preset, Bun as PM):  

         ```bash
         bunx --bun create-nx-workspace@latest scrum-poker            --preset=apps --pm=bun --interactive=false
         cd scrum-poker
         ``` — 1
       - [DX] Add Nx plugins: `bun add -d @nx/angular @nx/nest @nx/js` — 1

    3. **Generate Apps & Lib**
       - [FE] Angular app **web**:  

         ```bash
         bunx --bun nx g @nx/angular:application web            --routing=true --style=scss --standalone=true --e2eTestRunner=none
         ``` — 1
       - [BE] NestJS app **api** (link to web for dev proxy):  

         ```bash
         bunx --bun nx g @nx/nest:application api            --frontendProject=web --e2eTestRunner=none --linter=eslint
         ``` — 1
       - [SHARED] Shared types lib:  

         ```bash
         bunx --bun nx g @nx/js:library shared-types            --unitTestRunner=none --strict=true
         ``` — 1
    4. **Runtime Deps & Scripts**
       - [BE] Realtime deps: `bun add socket.io socket.io-client @nestjs/websockets @nestjs/platform-socket.io` — 1
       - [DX] Add root scripts to **package.json** (open file and add): — 0.5

         ```json
         {
           "scripts": {
             "dev": "bunx --bun nx run-many -t serve --projects=api,web",
             "build": "bunx --bun nx run-many -t build --projects=api,web",
             "lint": "bunx --bun nx run-many -t lint --all",
             "test": "bunx --bun nx run-many -t test --all"
           }
         }
         ```

    5. **Backend Prefix & Health Endpoint**
       - [BE] Set Nest global prefix to `/api` in `apps/api/src/main.ts` (add before `await app.listen(...)`): — 0.5

         ```ts
         // apps/api/src/main.ts
         app.setGlobalPrefix('api');
         ```

       - [BE] Add simple health controller in `apps/api/src/app.controller.ts` (or a new `health.controller.ts`): — 0.5

         ```ts
         import { Controller, Get } from '@nestjs/common';
         @Controller('healthz')
         export class HealthController {
           @Get()
           get() { return { ok: true }; }
         }
         ```

         And register it in the module (e.g., `AppModule`).
    6. **Dev Proxy (Angular → Nest)**
       - [FE] Ensure `apps/web/proxy.conf.json` exists with WebSocket support: — 0.5

         ```json
         {
           "/api": { "target": "http://localhost:3000", "secure": false, "ws": true }
         }
         ```

       - [FE] Ensure `apps/web/project.json` references the proxy in `targets.serve.options.proxyConfig`: — 0.5

         ```json
         "serve": {
           "executor": "@angular-devkit/build-angular:dev-server",
           "options": {
             "proxyConfig": "apps/web/proxy.conf.json"
           }
         }
         ```

    7. **Design Tokens (optional baseline)**
       - [FE] Add to `apps/web/src/styles.scss`: — 0.5

         ```scss
         :root {
           --bg:#0f1024; --bg-2:#141a4a; --fg:#e6f7ff;
           --accent-1:#00fff0; --accent-2:#ff00f4;
           --card-bg:rgba(255,255,255,.08); --card-fg:#e6f7ff; --card-stroke:rgba(255,255,255,.25);
           --elevation-2:0 10px 24px rgba(0,0,0,.35);
           --elevation-3:0 16px 38px rgba(0,0,0,.5);
           --radius:16px;
         }
         html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 20% 0%,#1a1f5c 0%,#0f1024 60%,#0a0b1e 100%);color:var(--fg);}
         ```

    8. **CI (GitHub Actions)**
       - [CI] Add `.github/workflows/ci.yml`: — 1

         ```yaml
         name: ci
         on:
           push: { branches: [ main ] }
           pull_request:
         jobs:
           ci:
             runs-on: ubuntu-latest
             steps:
               - uses: actions/checkout@v4
               - uses: oven-sh/setup-bun@v2
                 with: { bun-version: latest }
               - run: bun install
               - run: bunx --bun nx run-many -t lint test build --all
         ```

    9. **Smoke Test**
       - [QA] Install and run:  

         ```bash
         bun install
         bun run dev
         # In another terminal:
         curl http://localhost:3000/api/healthz
         curl http://localhost:4200/api/healthz  # should proxy to backend
         ``` — 1
    10. **Version Control**
        - [DX] Initialize git and first commit:  

          ```bash
          git init
          git add .
          git commit -m "chore: bootstrap Nx monorepo (Angular web, Nest api, shared-types) using Bun"
          ``` — 0.5

  - **Dependencies**: none

  - **How‑to (Step‑by‑Step Summary)**:
    1) Install Bun → `curl -fsSL https://bun.sh/install | bash`  
    2) Create workspace → `bunx --bun create-nx-workspace@latest scrum-poker --preset=apps --pm=bun --nx-cloud=false --interactive=false`  
    3) `cd scrum-poker` and add plugins → `bun add -d @nx/angular @nx/nest @nx/js`  
    4) Generate apps/libs (see commands above).  
    5) `bun add socket.io socket.io-client @nestjs/websockets @nestjs/platform-socket.io`  
    6) Add scripts to `package.json` (dev/build/lint/test).  
    7) Set Nest global prefix `/api`; add `/api/healthz`.  
    8) Create `apps/web/proxy.conf.json` and reference it in `apps/web/project.json`.  
    9) `bun install` → `bun run dev` → verify `http://localhost:4200` & proxy `curl http://localhost:4200/api/healthz`.  
    10) (Optional) Add CI workflow; commit and push.

  - **DoD**:
    - `bun run dev` serves both **api** and **web** locally; health check reachable at `/api/healthz` via both ports.
    - CI workflow present and green on PR.
    - README contains quickstart (Bun + Nx); all commands verified on a clean machine.
