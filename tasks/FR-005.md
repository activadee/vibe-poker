### Epic: Lobby & Routing | **Goal**: Simple lobby to create or join | **Refs**: FR-005, FR-012
- **Story**: As a user I can enter my name, create a room, or paste a code/link to join. | **Estimate**: 3
  - **AC**:
    - Inputs: Display Name; Room Code (optional).
    - Buttons: Create Room; Join Room (enabled when code present).
  - **Tasks**:
    - [FE] Lobby component (Angular) + routing to `/r/:roomId` — 2
    - [FE] Basic validation (3–30 chars) — 1
    - [QA] UI behavior snapshot tests — 1
  - **Dependencies**: FR‑001, FR‑002, FR‑012
  - **DoD**:
    - Lighthouse basic checks pass; keyboard navigation works.

---

Implementation (FR-005)

- Routing
  - `''` → Lobby (`apps/web/src/app/lobby/lobby.component.ts|html|scss`)
  - `'/r/:roomId'` → Room (`apps/web/src/app/room/room.component.ts`)
  - Defined in `apps/web/src/app/app.routes.ts`.

- Lobby UI/UX
  - Inputs: Display Name, Room Code/Link.
  - Actions: Create Room (disabled until valid name 3–30 chars), Join Room (enabled when any non-empty room code/link present).
  - Accessibility: Semantic labels, helper text, alert role on errors, no autofocus (per @angular-eslint/template/no-autofocus).
  - Validation: simple length check for display name; Room Code accepts either a raw code (e.g., `ABCD-1234`) or a full link; robust parsing via `extractRoomId()` to handle URLs with `.../r/<id>` and query/hash parts.
  - Persistence: attempts to store `displayName` in `localStorage`; failures are safely ignored with a warning.

- Behavior
  - Create Room calls `POST /api/rooms` and navigates to `/r/:id` on success.
  - Join Room navigates directly to `/r/:roomId` parsed from code/link; name is saved if valid but does not block joining.

- Tests (QA)
  - Extended unit tests in `apps/web/src/app/lobby/lobby.component.spec.ts`:
    - Snapshot of initial render.
    - Join CTA enable/disable based on code presence.
    - Create CTA enable/disable based on 3–30 char rule.
    - Link parsing for join and navigation.
  - All web tests pass: `npx nx test web`.

- Lint
  - Resolved template a11y lint (removed autofocus).
  - Resolved `no-empty` by logging `localStorage` failures.
  - Workspace lint passes for `web` with only existing warnings unrelated to FR-005.

Notes

- Signals: Avoided using Angular `computed()` for `nameValid`/`canJoin` because they referenced plain fields (not reactive signals) and would not update; implemented as methods evaluated during change detection instead.
