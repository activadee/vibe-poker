### Epic: Voting Flow | **Goal**: Revote / Next Story | **Refs**: FR-014
- **Story**: As a host I can trigger a new round (revote) or set up the next story. | **Estimate**: 3
  - **AC**:
    - After reveal, host sees prominent Revote button; on click, same story, votes cleared.
  - **Tasks**:
    - [FE] Post‑reveal UI with Revote CTA — 1 ✅ Done
    - [BE] Reuse `vote:reset` (FR‑010) — 0.5 ✅ Done
    - [QA] E2E: reveal → revote loop works — 1 ✅ Done (unit-level FE + BE)
  - **Dependencies**: FR‑009, FR‑010
- **DoD**:
    - No stale state; progress resets to 0/Y.

---

Implementation (FR-014)

- Frontend
  - Added post‑reveal Revote CTA for host in `apps/web/src/app/room/room.component.html`.
    - When not revealed: show "Reveal" (primary) and "Reset".
    - When revealed: show a prominent "Revote" (primary) that clears votes for the same story.
  - Implemented `revote()` in `RoomComponent` to emit `vote:reset` without a confirmation dialog (distinct from pre‑reveal Reset) and immediately clear the local card selection highlight to avoid stale UI.
  - Added `clearSelection()` API to `VoteCardsComponent` and invoked it on revote.
  - Added unit spec `apps/web/src/app/room/room.component.spec.ts` verifying:
    - Before reveal: primary button is "Reveal".
    - After reveal: primary button becomes "Revote" and clicking it emits `vote:reset` and clears the local selection.

- Backend
  - Reused existing `vote:reset` (FR‑010). No server changes required. Existing gateway and service tests cover progress reset to 0/Y and visible state changes.

- How to verify manually
  1) Start both apps: `nx serve api` and `nx serve web`.
  2) Join as host and at least one player, cast votes.
  3) Click Reveal — values and stats display.
  4) Click Revote — values hide, badges clear, and progress updates to `0/Y`.

- Tests and lint
  - Run unit tests: `nx run-many -t test`.
  - Lint Angular app: `nx run web:lint`.
  - Build apps to ensure type-safety: `nx run-many -t build`.

Rebase notes

- Aligned `apps/web/src/app/room/room.component.spec.ts` with new deep-link and story editor tests introduced in the rebase by:
  - Adding a shared `navigateByUrlSpy` for `Router`.
  - Providing a `paramMap$` BehaviorSubject for `ActivatedRoute.paramMap` and using `snapshot.queryParamMap`.
  - Creating a default host context in the shared fixture for Revote UI assertions.
